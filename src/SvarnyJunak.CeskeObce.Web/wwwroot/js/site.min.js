var autoComplete=function(){function e(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function o(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function n(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function s(e,n,s,a){o(a||document,n,function(o){for(var n,a=o.target||o.srcElement;a&&!(n=t(a,e));)a=a.parentElement;n&&s.call(a,o)})}if(document.querySelector){var a={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(e,t,o){}};for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);for(var l="object"==typeof a.selector?[a.selector]:document.querySelectorAll(a.selector),i=0;i<l.length;i++){var r=l[i];r.sc=document.createElement("div"),r.sc.className="autocomplete-suggestions "+a.menuClass,r.autocompleteAttr=r.getAttribute("autocomplete"),r.setAttribute("autocomplete","off"),r.cache={},r.last_val="",r.updateSC=function(e,t){var o=r.getBoundingClientRect();if(r.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+a.offsetLeft)+"px",r.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+a.offsetTop)+"px",r.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(r.sc.style.display="block",r.sc.maxHeight||(r.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(r.sc,null):r.sc.currentStyle).maxHeight)),r.sc.suggestionHeight||(r.sc.suggestionHeight=r.sc.querySelector(".autocomplete-suggestion").offsetHeight),r.sc.suggestionHeight))if(t){var n=r.sc.scrollTop,s=t.getBoundingClientRect().top-r.sc.getBoundingClientRect().top;s+r.sc.suggestionHeight-r.sc.maxHeight>0?r.sc.scrollTop=s+r.sc.suggestionHeight+n-r.sc.maxHeight:s<0&&(r.sc.scrollTop=s+n)}else r.sc.scrollTop=0},o(window,"resize",r.updateSC),document.body.appendChild(r.sc),s("autocomplete-suggestion","mouseleave",function(e){var t=r.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},r.sc),s("autocomplete-suggestion","mouseover",function(e){var t=r.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},r.sc),s("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var o=this.getAttribute("data-val");r.value=o,a.onSelect(e,o,this),r.sc.style.display="none"}},r.sc),r.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){var e=0}e?r!==document.activeElement&&setTimeout(function(){r.focus()},20):(r.last_val=r.value,r.sc.style.display="none",setTimeout(function(){r.sc.style.display="none"},350))},o(r,"blur",r.blurHandler);var u=function(e){var t=r.value;if(r.cache[t]=e,e.length&&t.length>=a.minChars){for(var o="",n=0;n<e.length;n++)o+=a.renderItem(e[n],t);r.sc.innerHTML=o,r.updateSC(0)}else r.sc.style.display="none"};r.keydownHandler=function(e){var t=window.event?e.keyCode:e.which;if((40==t||38==t)&&r.sc.innerHTML){var o,n=r.sc.querySelector(".autocomplete-suggestion.selected");return n?(o=40==t?n.nextSibling:n.previousSibling,o?(n.className=n.className.replace("selected",""),o.className+=" selected",r.value=o.getAttribute("data-val")):(n.className=n.className.replace("selected",""),r.value=r.last_val,o=0)):(o=40==t?r.sc.querySelector(".autocomplete-suggestion"):r.sc.childNodes[r.sc.childNodes.length-1],o.className+=" selected",r.value=o.getAttribute("data-val")),r.updateSC(0,o),!1}if(27==t)r.value=r.last_val,r.sc.style.display="none";else if(13==t||9==t){var n=r.sc.querySelector(".autocomplete-suggestion.selected");n&&"none"!=r.sc.style.display&&(a.onSelect(e,n.getAttribute("data-val"),n),setTimeout(function(){r.sc.style.display="none"},20))}},o(r,"keydown",r.keydownHandler),r.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(t<35||t>40)&&13!=t&&27!=t){var o=r.value;if(o.length>=a.minChars){if(o!=r.last_val){if(r.last_val=o,clearTimeout(r.timer),a.cache){if(o in r.cache)return void u(r.cache[o]);for(var n=1;n<o.length-a.minChars;n++){var s=o.slice(0,o.length-n);if(s in r.cache&&!r.cache[s].length)return void u([])}}r.timer=setTimeout(function(){a.source(o,u)},a.delay)}}else r.last_val=o,r.sc.style.display="none"}},o(r,"keyup",r.keyupHandler),r.focusHandler=function(e){r.last_val="\n",r.keyupHandler(e)},a.minChars||o(r,"focus",r.focusHandler)}this.destroy=function(){for(var e=0;e<l.length;e++){var t=l[e];n(window,"resize",t.updateSC),n(t,"blur",t.blurHandler),n(t,"focus",t.focusHandler),n(t,"keydown",t.keydownHandler),n(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}}return e}();!function(){"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete}(),function(){document.getElementById("municipality-search").focus(),new autoComplete({minChars:1,selector:"input#municipality-search",onSelect:function(e,t,o){var n=o.getAttribute("data-val");document.querySelector("#municipality-search").value=n,document.querySelector("form#select-municipality-form").submit()},source:function(e,t){var o=new XMLHttpRequest;o.open("POST","/Home/FindMunicipalities",!0),o.onload=function(){var e=JSON.parse(o.responseText);t(e)},o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send("name="+e)}})}(),function(){function e(){var e=document.querySelectorAll(".chart div .bar");Array.prototype.slice.call(e).forEach(function(e){e.style.visibility="visible",e.style.width=e.getAttribute("data-width")})}function t(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}var o=document.querySelectorAll(".data-population-progress>tbody>tr"),n=Array.prototype.map.call(o,function(e,t){return{year:Number(e.children[0].innerText),population:Number(e.children[1].innerText)}}),s=n.reduce(function(e,t){return e>t.population?e:t.population},0),a=function(){var e=document.querySelector(".chart").offsetWidth-60;return 330<e?330:e}(),c=function(e){return e*a/s},l=document.querySelector(".chart"),i=n.map(function(e){return"<div><span class='year-caption'>"+e.year+"</span><span class='bar' data-width='"+c(e.population)+"px' style='width: 0;visibility: hidden;transition: width 2s ease-out'>"+t(e.population)+"</div>"});l.innerHTML=i.join(""),setTimeout(e,500)}();