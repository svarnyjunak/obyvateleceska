(function(){function i(n){var t=Array.isArray(n)?{label:n[0],value:n[1]}:typeof n=="object"&&"label"in n&&"value"in n?n:{label:n,value:n};this.label=t.label||t.value;this.value=t.value}function e(n,t,i){var r,u,f;for(r in t)u=t[r],f=n.input.getAttribute("data-"+r.toLowerCase()),n[r]=typeof u=="number"?parseInt(f):u===!1?f!==null:u instanceof Function?null:f,n[r]||n[r]===0||(n[r]=r in i?i[r]:u)}function n(n,t){return typeof n=="string"?(t||document).querySelector(n):n||null}function u(n,t){return r.call((t||document).querySelectorAll(n))}function f(){u("input.awesomplete").forEach(function(n){new t(n)})}var t=function(i,r){var u=this;this.isOpened=!1;this.input=n(i);this.input.setAttribute("autocomplete","off");this.input.setAttribute("aria-autocomplete","list");r=r||{};e(this,{minChars:2,maxItems:10,autoFirst:!1,data:t.DATA,filter:t.FILTER_CONTAINS,sort:r.sort===!1?!1:t.SORT_BYLENGTH,item:t.ITEM,replace:t.REPLACE},r);this.index=-1;this.container=n.create("div",{className:"awesomplete",around:i});this.ul=n.create("ul",{hidden:"hidden",inside:this.container});this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container});n.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(n){var t=n.keyCode;u.opened&&(t===13&&u.selected?(n.preventDefault(),u.select()):t===27?u.close({reason:"esc"}):(t===38||t===40)&&(n.preventDefault(),u[t===38?"previous":"next"]()))}});n.bind(this.input.form,{submit:this.close.bind(this,{reason:"submit"})});n.bind(this.ul,{mousedown:function(n){var t=n.target;if(t!==this){while(t&&!/li/i.test(t.nodeName))t=t.parentNode;t&&n.button===0&&(n.preventDefault(),u.select(t,n.target))}}});this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||r.list||[];t.all.push(this)},r;return t.prototype={set list(t){if(Array.isArray(t))this._list=t;else if(typeof t=="string"&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if(t=n(t),t&&t.children){var i=[];r.apply(t.children).forEach(function(n){if(!n.disabled){var t=n.textContent.trim(),r=n.value||t,u=n.label||t;r!==""&&i.push({label:u,value:r})}});this._list=i}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(t){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,n.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.ul.removeAttribute("hidden");this.isOpened=!0;this.autoFirst&&this.index===-1&&this.goto(0);n.fire(this.input,"awesomplete-open")},next:function(){var n=this.ul.children.length;this.goto(this.index<n-1?this.index+1:n?0:-1)},previous:function(){var t=this.ul.children.length,n=this.index-1;this.goto(this.selected&&n!==-1?n:t-1)},goto:function(t){var i=this.ul.children;this.selected&&i[this.index].setAttribute("aria-selected","false");this.index=t;t>-1&&i.length>0&&(i[t].setAttribute("aria-selected","true"),this.status.textContent=i[t].textContent,this.ul.scrollTop=i[t].offsetTop-this.ul.clientHeight+i[t].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,i){if(t?this.index=n.siblingIndex(t):t=this.ul.children[this.index],t){var r=this.suggestions[this.index],u=n.fire(this.input,"awesomplete-select",{text:r,origin:i||t});u&&(this.replace(r),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:r}))}},evaluate:function(){var n=this,t=this.input.value;t.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(r){return new i(n.data(r,t))}).filter(function(i){return n.filter(i,t)}),this.sort!==!1&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(i){n.ul.appendChild(n.item(i,t))}),this.ul.children.length===0?this.close({reason:"nomatches"}):this.open()):this.close({reason:"nomatches"})}},t.all=[],t.FILTER_CONTAINS=function(t,i){return RegExp(n.regExpEscape(i.trim()),"i").test(t)},t.FILTER_STARTSWITH=function(t,i){return RegExp("^"+n.regExpEscape(i.trim()),"i").test(t)},t.SORT_BYLENGTH=function(n,t){return n.length!==t.length?n.length-t.length:n<t?-1:1},t.ITEM=function(t,i){var r=i.trim()===""?t:t.replace(RegExp(n.regExpEscape(i.trim()),"gi"),"<mark>$&<\/mark>");return n.create("li",{innerHTML:r,"aria-selected":"false"})},t.REPLACE=function(n){this.input.value=n.value},t.DATA=function(n){return n},Object.defineProperty(i.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),i.prototype.toString=i.prototype.valueOf=function(){return""+this.label},r=Array.prototype.slice,n.create=function(t,i){var r=document.createElement(t),u,f,e;for(u in i)f=i[u],u==="inside"?n(f).appendChild(r):u==="around"?(e=n(f),e.parentNode.insertBefore(r,e),r.appendChild(e)):u in r?r[u]=f:r.setAttribute(u,f);return r},n.bind=function(n,t){var i,r;if(n)for(i in t)r=t[i],i.split(/\s+/).forEach(function(t){n.addEventListener(t,r)})},n.fire=function(n,t,i){var r=document.createEvent("HTMLEvents"),u;r.initEvent(t,!0,!0);for(u in i)r[u]=i[u];return n.dispatchEvent(r)},n.regExpEscape=function(n){return n.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(n){for(var t=0;n=n.previousElementSibling;t++);return t},typeof Document!="undefined"&&(document.readyState!=="loading"?f():document.addEventListener("DOMContentLoaded",f)),t.$=n,t.$$=u,typeof self!="undefined"&&(self.Awesomplete=t),typeof module=="object"&&module.exports&&(module.exports=t),t})(),function(){function t(){var t=new XMLHttpRequest;t.open("POST","Home/FindMunicipalities",!0);t.onload=function(){console.log(JSON.parse(t.responseText));var i=JSON.parse(t.responseText);n.list=i};t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.send("name="+this.value)}document.querySelector("input#municipality-search").addEventListener("keyup",t);var n=new Awesomplete(document.querySelector("input#municipality-search"))}();